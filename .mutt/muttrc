# Set folding to markers for this file only 
# vim: foldmethod=marker

# Server config {{{
set realname = "John Godlee"
set from = "johngodlee@gmail.com"
set use_from = yes
set envelope_from = yes
set postponed = "[Google Mail]/Drafts"
set smtp_url = "smtps://johngodlee@gmail.com@smtp.gmail.com:465/"
set imap_user = "johngodlee@gmail.com"
set folder = "imaps://imap.gmail.com:993"
set spoolfile = "+INBOX"
set ssl_force_tls = yes
set smtp_authenticators = 'gssapi:login'
# }}}

# Text editor {{{
set editor = "vim -u ~/.vimrc_alpine"
set charset = "utf-8"
unset record
# }}}

# Status bar {{{
set status_chars  = " *%A"
set status_format = "───[Folder: %f]───[%r%m messages%?n? (%n new)?%?d? (%d to delete)?%?t? (%t tagged)?]───%>─%?p?( %p postponed )?───"
# }}}

# Index {{{
set date_format = "%b-%d"
set index_format = "[%Z] %X %M %-20.20F -- %s %* %D"
set sort = threads                         # like gmail
set sort_aux = last-date-received  # like gmail
set uncollapse_jump                        # don't collapse on an unread message
set sort_re                                # thread based on regex
set reply_regexp = "^(([Rr][Ee]?(\[[0-9]+\])?: *)?(\[[^]]+\] *)?)*"
# }}}

# Pager {{{
set pager_index_lines = 8 # number of index lines to show
set pager_context = 3      # number of context lines to show
set pager_stop             # don't go to next message automatically
set menu_scroll            # scroll in menus
set tilde                  # show tildes like in vim
unset markers              # no ugly plus signs
alternative_order text/plain text/enriched text/html
# }}}

# Sidebar {{{
set sidebar_visible
set sidebar_format = "%B %* [%N]%S"
set mail_check_stats
mailboxes =INBOX =Urgent =Archived =Coding_Club =Diss_Manuscript =Personal =PhD =SEOSAW_contacts =SEOSAW_logos =STEB_2018  ='[Google Mail]/Drafts' ='[Google Mail]/Sent Mail'
# }}}

# Caching mail {{{ 
set header_cache = "~/.mutt/headers" 
set message_cachedir = "~/.mutt/messages"
# }}}

# Keybindings {{{

# Movement {{{
bind index gg first-entry
bind index G last-entry
bind index j next-entry
bind index k previous-entry
bind index <enter> display-message			 
bind pager gg top
bind pager G bottom
bind pager j next-line
bind pager k previous-line
bind pager J next-entry
bind pager K previous-entry
# }}}

# Actions {{{
bind index,pager R group-reply
bind index,pager r reply
bind index <space>  collapse-thread
macro index C "<copy-message>?<toggle-mailboxes>" "copy a message to a mailbox"
macro index M "<save-message>?<toggle-mailboxes>" "move a message to a mailbox"
# }}}

# Sidebar, using Ctrl prefixes {{{
bind index J sidebar-next
bind index K sidebar-prev
bind index L sidebar-open
# }}}

# }}}

# External scripts {{{
source ~/.mutt/addressbook
source "~/.mutt/purgecache.sh '$message_cachedir'|"
set mailcap_path = ~/.mutt/mailcap       # what to do with attachments
# }}}

