#!/bin/bash

# Select menu to name account
PS3='Select account: '
options=("Student Account" "First Reserve Account" "ISA Account")
select opt in "${options[@]}"
do
    case $opt in
        "Student Account")
            acc=student_acc
						break
            ;;
        "First Reserve Account")
            acc=first_res_acc
						break
            ;;
        "ISA Account")
            acc=isa_acc
						break
            ;;
    esac
done

# Create tmpfile
tmpfile=$(mktemp)

# Remove first three lines
# Replace first line with: date,,note,amount,,,
tail -n +4 $1 | sed '1 i\
	date,,note,amount,,,
' > $tmpfile

# Execute ledger convert and display in STDOUT
ledger convert $tmpfile --input-date-format "%d/%m/%Y" --account assets:bank:$acc -f ~/.ledger.journal

# Delete tmpfile
rm ${tmpfile}
